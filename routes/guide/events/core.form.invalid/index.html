<svelte:head>
	<title>FormValidation â€¢ core.form.invalid event</title>
</svelte:head>

<Guide>
    <h1 class="f3 f2-m f1-l tc">core.form.invalid event</h1>
    <h2 class="f4 fw4 tc">Triggered when the form is completely validated, and all fields are invalid</h2>

    <section class="mb4">
        <h2><span class="bb b--gray">Example: Regenerating captcha when the form is invalid</span></h2>

        <p class="lh-copy">In the following form, click the <span class="i">Submit</span> button to see the new captcha is generated.</p>
<SampleCode lang="javascript" code={`
const captchaEle = document.getElementById('captchaOperation');

const generateCaptcha = function() {
    const random = [randomNumber(1, 100), randomNumber(1, 200)];
    captchaEle.innerHTML = [random[0], '+', random[1], '='].join(' ');
};

generateCaptcha();

FormValidation
    .formValidation(
        document.getElementById('demoForm'),
        {
            fields: {
                captcha: {
                    validators: {
                        callback: {
                            message: 'Wrong answer',
                            callback: function(input) {
                                const items = captchaEle.innerHTML.split(' ');
                                const sum = parseInt(items[0]) + parseInt(items[2]);
                                return input.value == sum;
                            }
                        }
                    }
                }
            },
            plugins: {
                submitButton: new FormValidation.plugins.SubmitButton(),
                ...
            },
        }
    )
    .on('core.form.invalid', function() {
        // Regenerate captcha
        generateCaptcha();
    });
`} />
        <Tip>
            The example uses a very simple captcha generation which is a sum operation of two random numbers. In reality, it's recommended to use the popular Google's <a href="/guide/plugins/recaptcha/" class="blue dim link">reCaptcha</a> service
        </Tip>
        <Demo prefix="/guide/events/core.form.invalid/regenerate-captcha" frameworks={['Tachyons']} />
    </section>

    <section class="cf mb4">
        <div class="fl w-50 tl">
            <a href="/guide/events/core.field.validating/" class="b blue dim link pa2">&larr; core.field.validating event</a>
        </div>
        <div class="fl w-50 tr">
            <a href="/guide/events/core.form.notvalidated/" class="b blue dim link pa2">core.form.notvalidated event &rarr;</a>
        </div>
    </section>
</Guide>

<script>
export default {
    components: {
        Demo: '../../../../components/Demo.html',
        Guide: '../../../../components/Guide.html',
        SampleCode: '../../../../components/SampleCode.html',
        Tip: '../../../../components/Tip.html',
    },
};
</script>
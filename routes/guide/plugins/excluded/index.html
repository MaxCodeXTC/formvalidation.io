<svelte:head>
	<title>FormValidation â€¢ Excluded plugin</title>
</svelte:head>

<Guide>
    <h1 class="f3 f2-m f1-l tc">Excluded plugin</h1>
    <h2 class="f4 fw4 tc">Ignore validations on particular field</h2>

    <section class="mb4">
        <h2><span class="bb b--gray">Usage</span></h2>
        <p class="lh-copy">This plugin allows you to indicate fields which won't be validated. By default, the plugin will not validate the following kind of fields:</p>
        <ul class="pa0 ma0 ml3 lh-copy">
            <li>disabled</li>
            <li>hidden</li>
            <li>invisible</li>
        </ul>
        <p class="lh-copy">The following piece of code is the starting point to use the Excluded plugin:</p>
<SampleCode lang="html" code={`
<html>
<head>
    <link-tag rel="stylesheet" href="/vendors/formvalidation/dist/css/formValidation.min.css">
</head>
<body>
    <form id="demoForm" method="POST">
        ...
    </form>

<script-tag src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim.min.js"></script-tag>
<script-tag src="/vendors/formvalidation/dist/js/FormValidation.min.js"></script-tag>

<script-tag>
document.addEventListener('DOMContentLoaded', function(e) {
    FormValidation.formValidation(
        document.getElementById('demoForm'),
        {
            fields: {
                ...
            },
            plugins: {
                excluded: new FormValidation.plugins.Excluded({
                    excluded: function(field, element, elements) {
                        // field is the field name
                        // element is the field element
                        // elements is the list of field elements in case
                        // we have multiple elements with the same name

                        // return true if you want to exclude the field
                    }
                }),
                ...
            },
        }
    );
});
</script-tag>
</body>
</html>
`} />
        <p class="lh-copy">The sample code above assumes that the FormValidation files are placed inside the <code>vendors</code> directory. You might need to change the path depending on where you place them on the server.</p>
    </section>

    <section class="mb4">
        <h2><span class="bb b--gray">Basic example</span></h2>
        <p class="lh-copy">In the following form, there are two invisible fields called <span class="i">Job title</span> and <span class="i">Department</span>. Since they are not visible initially, they will not be validated when you click the <span class="i">Submit</span> button.</p>
        <p class="lh-copy">Clicking the <span class="i">More info</span> button will turn them into visible fields, and as result, they will be required due to their validation rules.</p>
        <Demo prefix="/guide/plugins/excluded/basic" frameworks={['Tachyons']} />
    </section>

    <section class="mb4">
        <h2><span class="bb b--gray">Advanced example</span></h2>
        <p class="lh-copy">Consider the following example. It asks you about the Javascript framework you like most. You can choose one from the list of popular Javascript frameworks such as Angular, Ember, React, Vue.</p>
        <p class="lh-copy">If your favorite framework is not in the list, you must fill its name in a text box. You can use the
                <a href="/guide/validators/callback/" class="blue dim link">callback</a> validator to validate this input:</p>
<SampleCode lang="Javascript" code={`
FormValidation.formValidation(
    form,
    {
        fields: {
            framework: {
                validators: {
                    notEmpty: {
                        message: 'Please select a framework'
                    }
                }
            },
            otherFramework: {
                validators: {
                    callback: {
                        message: 'Please specific the framework',
                        callback: function(input) {
                            const selectedCheckbox = form.querySelector('[name="framework"]:checked');
                            const framework = selectedCheckbox ? selectedCheckbox.value : '';
    
                            return (framework !== 'other')
                                    // The field is valid if user picks 
                                    // a given framework from the list
                                    ? true
                                    // Otherwise, the field value is required
                                    : (input.value !== '');
                        }
                    }
                }
            },
        },
        plugins: {
            ...
        },
    }
);
`} />
        <p class="lh-copy">The logic inside the <code>callback</code> function is quite simple and easy to understand. The problem comes when you submit the form, the
            <code>otherFramework</code> field is marked as valid with a valid icon even if you choose a framework from the list.
            In that case, the <code>otherFramework</code> field should be completely ignored.</p>
        <p class="lh-copy">In order to fix that, we can use the <code>excluded</code> option as following:</p>
<SampleCode lang="Javascript" code={`
FormValidation.formValidation(
    form,
    {
        fields: {
            framework: {
                validators: {
                    notEmpty: {
                        message: 'Please select a framework'
                    }
                }
            },
            otherFramework: {
                validators: {
                    notEmpty: {
                        message: 'Please specific the framework',
                    }
                }
            },
        },
        plugins: {
            excluded: new FormValidation.plugins.Excluded({
                excluded: function(field, ele, eles) {
                    const selectedCheckbox = form.querySelector('[name="framework"]:checked');
                    const framework = selectedCheckbox ? selectedCheckbox.value : '';
                    return (field === 'otherFramework' && framework !== 'other')
                            || (field === 'framework' && framework === 'other');
                },
            }),
        },
    }
);
`} />
        <Tip>When the field validation is ignored, its container will not have the success class, and the associated <a href="/guide/plugins/icon/" class="blue dim link">icon</a> isn't shown.</Tip>
        <Demo prefix="/guide/plugins/excluded/advanced" frameworks={['Bootstrap']} />
    </section>

    <section class="mb4">
        <h2><span class="bb b--gray">Changelog</span></h2>
        <ul class="pa0 ma0 ml3 lh-copy">
            <li>v1.3.0: First release. It means that the Excluded plugin requires FormValidation v1.3.0 or newer.</li>
        </ul>
    </section>

    <section class="cf mb4">
        <div class="fl w-50 tl">
            <a href="/guide/plugins/default-submit/" class="b blue dim link pa2">&larr; DefaultSubmit plugin</a>
        </div>
        <div class="fl w-50 tr">
            <a href="/guide/plugins/foundation/" class="b blue dim link pa2">Foundation plugin &rarr;</a>
        </div>
    </section>
</Guide>

<script>
export default {
    components: {
        Demo: '../../../../components/Demo.html',
        Guide: '../../../../components/Guide.html',
        SampleCode: '../../../../components/SampleCode.html',
        Tip: '../../../../components/Tip.html',
    },
};
</script>